function parseLinks(t){return t.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g,function(t){return t.link(t)})}function parseHashTags(t){return t.replace(/(^|\s)(#[a-z\d-]+)/gi,function(t){return t.link(t)})}function parseUser(t){return t.replace(/[@]+[A-Za-z0-9-_]+/g,function(t){var e=t.replace("@","");return t.link("http://twitter.com/"+e)})}function populateTweetModule(){var t="http://localhost:5757/web/static/test_json/tweet.json";$.getJSON(t,function(t){$.each(t.rows,function(t,e){$.each(e,function(t,e){if(void 0!==e.text){var a=new Date(e.created_at),n=a.format(" H:i:s - d M Y"),i=parseLinks(e.text);i=parseHashTags(i),i=parseUser(i);var s='<div class="item">';s+='<img src="'+e.user.profile_image_url+'" alt="user image" class="online">',s+='<p class="message">',s+='<a href="http://www.twitter.com/'+e.user.screen_name+'" class="name">',s+='<small class="text-muted pull-right"><i class="fa fa-clock-o"></i>'+n+"</small>",s+=e.user.name+"</a>",s+='<small class="text-muted">@'+e.user.screen_name+"</small><br>",s+=i,s+='</p><div class="attachment">',s+='<small class="text-muted">Retweets: '+e.retweet_count+" | Favorites: "+e.favorite_count+' | Sentiment: <i class="fa '+sentiment_icon.positive+'"></i></small>',s+="</div></div>",$("#chat-box").append(s)}})})})}function drawPieChart(t){var e={pieHole:.4,is3D:!0,colors:["#00aff0","#f05032","#54b847"]};null!==t&&null!==chart?chart.draw(t,e):console.log("Error drawing pie chart")}function parseResultsJSON(){var t="http://localhost:5757/web/static/test_json/results.json",e="<tr><th>State/Territory</th><th>Sentiment</th><th>Positive</th><th>Neutral</th><th>Negative</th></tr>";$.getJSON(t,function(t){$.each(t,function(t,a){if(null!==a){var n=google.visualization.arrayToDataTable([["Results","Totals per Sentiment"],["Positive",parseInt(a.total_positive)],["Negative",parseInt(a.total_negative)],["Neutral",parseInt(a.total_neutral)]]);drawPieChart(n)}$.each(a.regions,function(t,a){e+="<tr>",e+='<td><a href="#">'+a.name+"</a></td>",e+='<td><i class="fa '+sentiment_icon[a.sentiment]+'"></i></td>',e+="<td>"+a.positive+"</td>",e+="<td>"+a.neutral+"</td>",e+="<td>"+a.negative+"</td>",e+="</tr>"})}),$("#regions-table").append(e)})}function initializeChart(){return chart=new google.visualization.PieChart(document.getElementById("piechart_3d"))}function initializeMap(){var t={center:{lat:-37.816667,lng:144.966667},zoom:8};map=new google.maps.Map(document.getElementById("regions_div"),t)}var map=null,chart=null,sentiment_icon={};sentiment_icon.positive="fa-thumbs-o-up",sentiment_icon.negative="fa-thumbs-o-down",sentiment_icon.neutral="fa-angellist",google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(initializeChart),google.maps.event.addDomListener(window,"load",initializeMap),$(window).load(function(){$(function(){$("#chat-box").slimScroll({height:"250px"})}),parseResultsJSON()}),$(document).ready(function(){populateTweetModule()});